<%#= link_to "Volver", users_path %>
<%#= link_to "Crear Evento", pages_events_path  %>
<div class="container mt-2">

    <h1><strong><%= @supplier.business_name %></strong></h1>

    <p style="font-size: 15px; margin-top:-11px; margin-bottom:-11px" ></i> <strong>Total de reseñas</strong>   <%= @total_reviews %> <strong> Evaluación promedio</strong> <%= @promedio%>
      <% if @promedio != "Este proveedor aún no tiene comentarios"   %>
        <% @promedio.times do  %>
                <i class="fa-sharp fa-solid fa-star pb-1" style="color: #FF3BB8;"></i>
      <% end %>
    <% end %>
    </p>

<hr>
<div class=" border shadow mt-3 " style=" border-radius: 20px;">

  <div class="row">
      <div class="col-6 mt-2">
        <div class="m-3">
          <div id="carouselExampleCaptions" class="carousel slide">
            <div class="carousel-indicators">
              <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
              <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
              <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
            </div>
              <div class="carousel-inner">
                <div class="carousel-item CarouselImg active">
                  <%= cl_image_tag @supplier.photos.first.key, class:"d-block ", width:600, height:500, crop: :fill %>
                </div>
                <div class="carousel-item CarouselImg">
                  <%= cl_image_tag @supplier.photos.last.key, class:"d-block w-100", width:600, height:500, crop: :fill %>
                </div>
                <div class="carousel-item CarouselImg">
                  <%= cl_image_tag @supplier.photos.second.key, class:"d-block w-100", width:600, height:500, crop: :fill %>
                </div>

            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>
        </div>
      </div>
      <div class="col-6">
        <div class="m-3">
          <h5 class="card-title mb-1"><strong>Acera de nosotros: </strong> </h5>
          <p class="card-text mb-1"><%= @supplier.description %></p>
          <p class="card-text mb-1"><i class="fa-regular fa-clock" style="color: #919191;"></i> <small class="text-body-secondary">Servicio minimo 3 horas.</small> </p>
          <p class="card-text mb-1"><i class="fa-solid fa-check" style="color: #919191;"></i> <small class="text-body-secondary">Servicio inicial considera 30 personas. </small> </p>
          <p class="card-text mb-1"><i class="fa-regular fa-envelope" style="color: #919191;"></i> <small class="text-body-secondary"><%="Respuesta promedio  #{(2..6).to_a.sample} horas."%></small> </p>
          <p class="card-text mb-1"><i class="fa-regular fa-circle-xmark" style="color: #919191;"></i> <small class="text-body-secondary">Servicios adicionales no incluidos.</small> </p>

              <hr class="card-text mt-1">
          <% if params["event"] %>
              <div class="container border shadow" style="background-color: #f0f0f0; border-radius: 20px;">
                  <h5 class="text-center">Mensaje al proveedor</h5> <h6><%= params[:event_type] %></h6>
                <%= simple_form_for [@event, @estimation] do |f| %>
                  <%= f.input :delivery_date, input_html:{min: Date.today, max: @event.date} ,html5:true, label: "¿Cuál es la fecha de Entrega?"%>
                  <%= f.input :comments, label: "Contale al proveedor lo que necesitás:"  %>
                  <%= f.hidden_field :event, value: @event %>
                  <%= f.hidden_field :user_id, value: params[:id] %>
                        <div class="row d-flex justify-content-center">
                    <div class="col-2 p-2">
                      <%= f.submit "Cotizar", class:"btn btn-success"%>
                    </div>
                    <div class="col-2 p-2">
                        <%= link_to "Volver", users_path(event: @event), class:"btn btn-primary" %>
                    </div>
                  </div>
                <% end %>
              </div>
            <% else %>
              <div class="container border shadow p-2" style="background-color: #f0f0f0; border-radius: 20px;">
                  <h1 class="text-center"> ¿Te gustó este servicio? </h1>
                  <br>
                        <div class="row d-flex justify-content-center">
                    <div class="col-12">
                      <h3> Organizá tu evento con Eventik</h3>
                      <p>Accedé a cientos de proveedores exclusivos y creá un evento sin preocupaciones.</p>
                    </div>
                    <br>
                    <div class="col-6" >
                        <%= link_to "Crear Evento", pages_events_path, class:"btn btn-success text-light" %>
                        <%= link_to "Volver", users_path, class:"btn btn-success text-light" %>
                    </div>
                  </div>
              </div>
          <% end %>
              </div>
            </div>
        </div>
  </div>


<hr>
  <div class="row">
    <div class="col-6 mt-2">
        <h1 class="font-$headers-font ">Comentarios para este proveedor</h1>
        <div class= "d-flex justify-content-start align-items-center pt-4 mb-4 pb-5">
          <% @reviews.take(3).each do |review| %>
            <div class="card border-0 my-2" style="width: 18rem;">
              <%= image_tag "no_image", class:"img-fluid rounded-start ms-0" %>
              <div class="card-body ms-1">
              <h5 class="card-title pb-1"><li><%= review.comment %> </li></h5>
              <h5 class="fa-sharp fa-solid fa-star pb-1" class="card-title pb-1"> <%=  review.rating %> </h5>
              </div>
            </div>
          <% end %>
        </div>
    </div>
    <div class="col-6 mt-2 mb-3">
      <h1 class="font-$headers-font ">Ubicación de este proveedor</h1>
      <div id='map' style='width: 100%; height: 300px;'
      data-controller="map"
      data-map-api-key-value="<%= ENV['MAPBOX_API_KEY']  %> "
      data-map-markers-value=" <%= @markers.to_json %>"
      ></div>
    </div>
  </div>
</div>
